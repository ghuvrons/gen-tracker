(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(e,t,c){"use strict";c.r(t);var a=c("7a23");function l(e,t,c,l,o,n){const b=Object(a["G"])("map-management"),i=Object(a["G"])("q-avatar"),r=Object(a["G"])("q-badge"),s=Object(a["G"])("q-tab"),d=Object(a["G"])("q-tabs"),O=Object(a["G"])("report-log"),j=Object(a["G"])("q-tab-panel"),u=Object(a["G"])("driver-management"),p=Object(a["G"])("global-configuration"),v=Object(a["G"])("q-tab-panels"),f=Object(a["G"])("q-splitter"),m=Object(a["G"])("q-page");return Object(a["A"])(),Object(a["h"])(m,null,{default:Object(a["S"])((()=>[Object(a["k"])(f,{modelValue:e.splitter,"onUpdate:modelValue":t[3]||(t[3]=t=>e.splitter=t),style:{height:"calc(100vh - 50px)"},horizontal:""},{before:Object(a["S"])((()=>[Object(a["k"])(b)])),separator:Object(a["S"])((()=>[Object(a["k"])(i,{color:"grey","text-color":"white",size:"20px",icon:"drag_indicator"})])),after:Object(a["S"])((()=>[Object(a["k"])(d,{modelValue:e.selectedTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedTab=t),class:"bg-primary text-white",dense:""},{default:Object(a["S"])((()=>[Object(a["k"])(s,{name:"tab-1",label:"Report Log"},{default:Object(a["S"])((()=>[Object(a["k"])(r,{color:"red",floating:""},{default:Object(a["S"])((()=>[Object(a["j"])(Object(a["K"])(e.devReports.length),1)])),_:1})])),_:1}),Object(a["k"])(s,{name:"tab-2",label:"Driver Management"},{default:Object(a["S"])((()=>[Object(a["k"])(r,{color:"red",floating:""},{default:Object(a["S"])((()=>[Object(a["j"])(Object(a["K"])(e.devFingers.length),1)])),_:1})])),_:1}),Object(a["k"])(s,{name:"tab-3",label:"Configuration"})])),_:1},8,["modelValue"]),Object(a["k"])(v,{modelValue:e.selectedTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedTab=t),swipeable:""},{default:Object(a["S"])((()=>[Object(a["k"])(j,{name:"tab-1"},{default:Object(a["S"])((()=>[Object(a["k"])(O,{"content-style":e.contentStyle},null,8,["content-style"])])),_:1}),Object(a["k"])(j,{name:"tab-2"},{default:Object(a["S"])((()=>[Object(a["k"])(u,{"content-style":e.contentStyle},null,8,["content-style"])])),_:1}),Object(a["k"])(j,{name:"tab-3"},{default:Object(a["S"])((()=>[Object(a["k"])(p,{"content-style":e.contentStyle},null,8,["content-style"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})}const o=Object(a["j"])(" No report yet ");function n(e,t,c,l,n,b){const i=Object(a["G"])("q-icon"),r=Object(a["G"])("q-banner"),s=Object(a["G"])("q-chip"),d=Object(a["G"])("q-item-section"),O=Object(a["G"])("q-item-label"),j=Object(a["G"])("q-item"),u=Object(a["G"])("q-virtual-scroll"),p=Object(a["G"])("q-tooltip"),v=Object(a["G"])("q-btn"),f=Object(a["G"])("q-page-sticky");return Object(a["A"])(),Object(a["h"])("div",{style:e.contentStyle},[0==e.devReports.length?(Object(a["A"])(),Object(a["h"])(r,{key:0},{avatar:Object(a["S"])((()=>[Object(a["k"])(i,{name:"info"})])),default:Object(a["S"])((()=>[o])),_:1})):(Object(a["A"])(),Object(a["h"])(u,{key:1,items:e.devReports,separator:""},{default:Object(a["S"])((({item:t,index:c})=>[Object(a["k"])(j,{key:c,active:t.hex===e.report.hex,"active-class":"bg-primary text-white",onClick:c=>e.setReport(t),clickable:"",dense:""},{default:Object(a["S"])((()=>[Object(a["k"])(d,{avatar:""},{default:Object(a["S"])((()=>[Object(a["k"])("div",null,[Object(a["k"])(s,{color:"FULL"==t.frameID.out?"green":"light-green",class:"q-ml-sm text-center",style:{width:"60px"},dark:"",dense:"",square:""},{default:Object(a["S"])((()=>[Object(a["j"])(Object(a["K"])(t.frameID.out),1)])),_:2},1032,["color"]),Object(a["k"])(s,{color:"primary",dark:"",dense:"",square:""},{default:Object(a["S"])((()=>[Object(a["j"])(Object(a["K"])(e.getDatetime(t.logDatetime)),1)])),_:2},1024)])])),_:2},1024),Object(a["k"])(d,null,{default:Object(a["S"])((()=>[Object(a["k"])(O,{class:"ellipsis"},{default:Object(a["S"])((()=>[Object(a["j"])(Object(a["K"])(t.hex),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["active","onClick"])])),_:1},8,["items"])),Object(a["k"])(f,{position:"bottom-right",offset:[18,18]},{default:Object(a["S"])((()=>[Object(a["k"])(v,{onClick:t[1]||(t[1]=t=>e.followState=!e.followState),icon:e.followState?"lock":"lock_open",color:e.followState?"secondary":"grey",disable:0==e.devReports.length,"fab-mini":""},{default:Object(a["S"])((()=>[e.$q.platform.is.desktop?(Object(a["A"])(),Object(a["h"])(p,{key:0,anchor:"top middle",self:"bottom middle"},{default:Object(a["S"])((()=>[Object(a["j"])(Object(a["K"])(e.followState?"Unfollow":"Follow"),1)])),_:1})):Object(a["i"])("",!0)])),_:1},8,["icon","color","disable"])])),_:1})],4)}var b=c("cfbf"),i=c("a7bc"),r=c("5662"),s=c("5502"),d=Object(a["l"])({props:{contentStyle:{type:String,required:!0}},setup(e){const t=Object(s["b"])(),c=Object(a["f"])((()=>t.state.db.report)),l=Object(a["f"])((()=>t.getters["db/devReports"])),o=e=>t.commit(i["k"],e),n=Object(a["f"])((()=>t.state.common.follow)),d=e=>t.commit(r["b"],e),O=Object(a["f"])({get:()=>n.value,set:e=>d(e)}),j=e=>b["a"].unix(e.val).format("HH:mm:ss");return{report:c,devReports:l,followState:O,setReport:o,getDatetime:j}}}),O=c("54e1"),j=c("0016"),u=c("a12b"),p=c("66e5"),v=c("4074"),f=c("b047"),m=c("0170"),k=c("de5e"),g=c("9c40"),S=c("05c0"),h=c("eebe"),y=c.n(h);d.render=n;var q=d;y()(d,"components",{QBanner:O["a"],QIcon:j["a"],QVirtualScroll:u["a"],QItem:p["a"],QItemSection:v["a"],QChip:f["a"],QItemLabel:m["a"],QPageSticky:k["a"],QBtn:g["a"],QTooltip:S["a"]});var _=c("ded3"),G=c.n(_);function Q(e,t,c,l,o,n){const b=Object(a["G"])("Marker"),i=Object(a["G"])("Polyline"),r=Object(a["G"])("GoogleMap");return Object(a["A"])(),Object(a["h"])(r,{class:"fit","api-key":e.apiKey,center:e.center,zoom:e.zoom},{default:Object(a["S"])((()=>[e.position.valid?(Object(a["A"])(),Object(a["h"])(b,{key:0,options:{position:e.center,icon:e.icon}},null,8,["options"])):Object(a["i"])("",!0),Object(a["k"])(i,{options:G()({path:e.path},e.polyOptions)},null,8,["options"])])),_:1},8,["api-key","center","zoom"])}var x=c("4082"),D=c.n(x),C=c("9482"),w=c("af6a"),R=c("9944");const F=({lng:e,lat:t})=>{const{lngMin:c,lngMax:a,latMin:l,latMax:o}=C["a"].map.borderIndonesia;return e>c&&e<a&&t>l&&t<o},I=e=>{var t;const c=G()(G()({},C["a"].map.centerIndonesia),{},{valid:!1});var a,l;"FULL"==Object(R["e"])(null===e||void 0===e||null===(t=e.frameID)||void 0===t?void 0:t.val)&&(c.lat=null===e||void 0===e||null===(a=e.gpsLatitude)||void 0===a?void 0:a.val,c.lng=null===e||void 0===e||null===(l=e.gpsLongitude)||void 0===l?void 0:l.val,c.valid=F(c));return c},A=e=>{var t,c;return"FULL"==Object(R["e"])(null===e||void 0===e||null===(t=e.frameID)||void 0===t?void 0:t.val)?null===e||void 0===e||null===(c=e.gpsHeading)||void 0===c?void 0:c.val:0};var T=c("7ec9"),L=Object(a["l"])({components:{GoogleMap:T["a"],Marker:T["b"],Polyline:T["c"]},setup(e){const t=Object(s["b"])(),c=Object(a["f"])((()=>t.state.db.report)),l=Object(a["f"])((()=>t.getters["db/devDevice"])),o=Object(a["f"])((()=>t.getters["db/devReports"])),{centerIndonesia:n,zoom:b}=C["a"].map,i=Object(a["C"])({zoom:b,icon:{path:"M16.001 5c-4.216 0-7.714 3.418-7.634 7.634.029 1.578.719 2.824 1.351 4.024.242.461 6.264 10.332 6.264 10.332V27l.001-.007.002.007v-.01l6.531-10.377c.407-.703.793-1.771.793-1.771A7.631 7.631 0 0 0 16.001 5zM16 16.019a3.895 3.895 0 0 1-3.896-3.897A3.898 3.898 0 1 1 16 16.019z",rotation:-180,fillColor:"red",fillOpacity:1,strokeWeight:.3,anchor:{x:16,y:28}},path:[],center:G()({},n),position:G()(G()({},n),{},{valid:!1}),polyOptions:{geodesic:!0,strokeColor:"#F88",strokeOpacity:.75,strokeWeight:2}}),r=e=>{let{valid:t}=e,c=D()(e,["valid"]);i.zoom=t?17:b,i.center=G()({},t?c:n),i.position=G()(G()({},c),{},{valid:t})},d=e=>{const t=I(e);t.valid&&i.path.push(t)};return Object(a["Q"])((()=>l.value),((e,t)=>{(null===e||void 0===e?void 0:e.vin)!=(null===t||void 0===t?void 0:t.vin)?(i.path=[],o.value.filter((({frameID:e})=>"FULL"==Object(R["e"])(e.val))).forEach((e=>d(e)))):d(null===e||void 0===e?void 0:e.lastFullReport)}),{immediate:!0,deep:!0}),Object(a["Q"])((()=>c.value),((e,t)=>{var c;const a="FULL"==Object(R["e"])(null===e||void 0===e||null===(c=e.frameID)||void 0===c?void 0:c.val),l=a?e:Object(w["c"])(e,o.value);r(I(l)),i.icon.rotation=A(l)-180}),{immediate:!0}),G()(G()({},Object(a["N"])(i)),{},{apiKey:C["a"].map.apiKey})}});L.render=Q;var V=L;const M={class:"text-subtitle2"},N=Object(a["j"])(" No finger driver yet ");function U(e,t,c,l,o,n){const b=Object(a["G"])("q-icon"),i=Object(a["G"])("q-banner"),r=Object(a["G"])("q-chip"),s=Object(a["G"])("q-item-section"),d=Object(a["G"])("q-item-label"),O=Object(a["G"])("q-btn"),j=Object(a["G"])("q-item"),u=Object(a["G"])("q-virtual-scroll"),p=Object(a["G"])("q-fab-action"),v=Object(a["G"])("q-fab"),f=Object(a["G"])("q-page-sticky");return Object(a["A"])(),Object(a["h"])("div",{style:e.contentStyle},[Object(a["k"])("div",M,"Last fetch: "+Object(a["K"])(e.getFingerTime()),1),0==e.devFingers.length?(Object(a["A"])(),Object(a["h"])(i,{key:0},{avatar:Object(a["S"])((()=>[Object(a["k"])(b,{name:"info"})])),default:Object(a["S"])((()=>[N])),_:1})):(Object(a["A"])(),Object(a["h"])(u,{key:1,items:e.devFingers,separator:""},{default:Object(a["S"])((({item:t,index:c})=>[Object(a["k"])(j,{key:c,dense:""},{default:Object(a["S"])((()=>[Object(a["k"])(s,{avatar:""},{default:Object(a["S"])((()=>[Object(a["k"])(r,{color:"primary",dark:"",square:""},{default:Object(a["S"])((()=>[Object(a["j"])(Object(a["K"])(t.fingerID),1)])),_:2},1024)])),_:2},1024),Object(a["k"])(s,null,{default:Object(a["S"])((()=>[Object(a["k"])(d,null,{default:Object(a["S"])((()=>[Object(a["j"])("Mr. "+Object(a["K"])(e.name[t.fingerID-1]),1)])),_:2},1024)])),_:2},1024),Object(a["k"])(s,{side:""},{default:Object(a["S"])((()=>[Object(a["k"])(O,{onClick:c=>e.remove(t),size:"sm",icon:"delete",outline:"",unelevated:"",round:""},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1},8,["items"])),Object(a["k"])(f,{position:"bottom-right",offset:[18,18]},{default:Object(a["S"])((()=>[Object(a["k"])(v,{modelValue:e.fab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.fab=t),"external-label":"","vertical-actions-align":"right",color:"secondary",icon:"keyboard_arrow_left",direction:"left","label-position":"top",padding:"sm"},{default:Object(a["S"])((()=>[Object(a["k"])(p,{onClick:e.fetch,disable:!e.devDevice,"label-position":"top",color:"primary",icon:"download",label:"Fetch","external-label":""},null,8,["onClick","disable"]),Object(a["k"])(p,{onClick:e.add,disable:!e.devDevice,"label-position":"top",color:"green",icon:"upload",label:"Add","external-label":""},null,8,["onClick","disable"]),Object(a["k"])(p,{onClick:e.clear,disable:!e.devDevice,"label-position":"top",color:"orange",icon:"delete_forever",label:"Reset","external-label":""},null,8,["onClick","disable"])])),_:1},8,["modelValue"])])),_:1})],4)}var K=c("b7fa"),E=Object(a["l"])({props:{contentStyle:{type:String,required:!0}},setup(e){const t=Object(a["o"])("sendCommand"),c=Object(s["b"])(),l=Object(a["f"])((()=>c.getters["db/devDevice"])),o=Object(a["f"])((()=>c.getters["db/devFingers"])),n=Object(a["D"])(["One","Two","Three","Four","Five"]),i=Object(a["D"])(!1),r=()=>{var e;const{fingerTime:t}=null!==(e=l.value)&&void 0!==e?e:{};return t?b["a"].unix(t).format("DD-MM-YY HH:mm:ss"):"Unknown"},d=()=>t("FINGER_FETCH"),O=()=>t("FINGER_ADD"),j=({fingerID:e})=>Object(K["a"])(`Are you sure to remove this fingerprint ${e} ?`).onOk((()=>t(`FINGER_DEL=${e}`))),u=()=>Object(K["a"])("Are you sure to clear all fingerprints  ?").onOk((()=>t("FINGER_RST")));return{name:n,fab:i,devFingers:o,devDevice:l,getFingerTime:r,fetch:d,add:O,remove:j,clear:u}}}),z=c("c294"),P=c("72db");E.render=U;var $=E;y()(E,"components",{QBanner:O["a"],QIcon:j["a"],QVirtualScroll:u["a"],QItem:p["a"],QItemSection:v["a"],QChip:f["a"],QItemLabel:m["a"],QBtn:g["a"],QPageSticky:k["a"],QFab:z["a"],QFabAction:P["a"]});const H={class:"row q-gutter-xs"},B={class:"col-auto"},J={key:0,class:"col-auto"},Y={class:"col-auto"},W={class:"col-auto"},X={class:"col-auto"},Z=Object(a["j"])("CSV"),ee=Object(a["j"])("JSON"),te={class:"row q-gutter-xs q-mt-xs"},ce={class:"col-auto"},ae={class:"row q-gutter-xs q-mt-xs"},le={class:"col-auto"};function oe(e,t,c,l,o,n){const b=Object(a["G"])("q-btn"),i=Object(a["G"])("q-item-label"),r=Object(a["G"])("q-item-section"),s=Object(a["G"])("q-item"),d=Object(a["G"])("q-list"),O=Object(a["G"])("q-btn-dropdown"),j=Object(a["G"])("q-uploader"),u=Object(a["G"])("q-toggle"),p=Object(a["H"])("close-popup");return Object(a["A"])(),Object(a["h"])("div",{style:e.contentStyle},[Object(a["k"])("div",H,[Object(a["k"])("div",B,[Object(a["k"])(b,{icon:"delete",label:"Reset DB",disable:0==e.devices.length,onClick:t[1]||(t[1]=t=>e.clearStore())},null,8,["disable"])]),e.$q.fullscreen.isCapable?(Object(a["A"])(),Object(a["h"])("div",J,[Object(a["k"])(b,{onClick:t[2]||(t[2]=t=>e.$q.fullscreen.toggle()),label:e.$q.fullscreen.isActive?"Normal":"Full",icon:e.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen"},null,8,["label","icon"])])):Object(a["i"])("",!0),Object(a["k"])("div",Y,[Object(a["k"])(b,{icon:"alarm_on",label:"Calibrate",disable:0==e.devReports.length,onClick:t[3]||(t[3]=t=>e.calibrate())},null,8,["disable"])]),Object(a["k"])("div",W,[Object(a["k"])(b,{icon:"gavel",label:"FORCE READY",onClick:t[4]||(t[4]=t=>e.ignoreResponse())})]),Object(a["k"])("div",X,[Object(a["k"])(O,{icon:"cloud_download",label:"Export"},{default:Object(a["S"])((()=>[Object(a["k"])(d,null,{default:Object(a["S"])((()=>[Object(a["T"])(Object(a["k"])(s,{clickable:e.reports.length>0,onClick:t[5]||(t[5]=t=>e.exportCSV(e.reports))},{default:Object(a["S"])((()=>[Object(a["k"])(r,null,{default:Object(a["S"])((()=>[Object(a["k"])(i,null,{default:Object(a["S"])((()=>[Z])),_:1})])),_:1})])),_:1},8,["clickable"]),[[p]]),Object(a["T"])(Object(a["k"])(s,{clickable:e.reports.length>0,onClick:t[6]||(t[6]=t=>e.exportJSON(e.reports))},{default:Object(a["S"])((()=>[Object(a["k"])(r,null,{default:Object(a["S"])((()=>[Object(a["k"])(i,null,{default:Object(a["S"])((()=>[ee])),_:1})])),_:1})])),_:1},8,["clickable"]),[[p]])])),_:1})])),_:1})])]),Object(a["k"])("div",te,[Object(a["k"])("div",ce,[Object(a["k"])(j,{ref:"uploader",factory:e.importData,accept:".json",label:"Import JSON","auto-upload":""},null,8,["factory"])])]),Object(a["k"])("div",ae,[Object(a["k"])("div",le,[Object(a["k"])(u,{modelValue:e.notificationState,"onUpdate:modelValue":t[7]||(t[7]=t=>e.notificationState=t),label:"Push Notification"},null,8,["modelValue"])])])],4)}c("ddb0"),c("13d5"),c("26e9"),c("e6cf");var ne=c("f23f"),be=c("2e92");const ie=e=>e.map((e=>G()({},w["a"].reduce(((t,{field:c,no:a})=>G()(G()({},t),{},{[a]:e[c]?e[c].out:""})),{})))),re=()=>w["a"].reduce(((e,{title:t,unit:c})=>e.concat([t+(c?` (${c})`:"")])),[]),se=e=>{const t=new ne["ExportToCsv"]({fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,title:"My Awesome CSV",useTextFile:!1,useBom:!0,useKeysAsHeaders:!1,headers:re()});t.generateCsv(ie(e))},de=e=>e?e.map((({hex:e})=>e)):[],Oe=e=>{const t=`tracking-${Object(b["a"])().format("YYMMDDHHmmss")}`,c=de(e.slice().reverse()),a="json";Object(be["a"])({data:c,fileName:t,exportType:a})},je=e=>new Promise(((t,c)=>{e||c();const a=new FileReader;a.onload=e=>t(JSON.parse(e.target.result)),a.readAsText(e)}));var ue=c("6ad4"),pe=Object(a["l"])({props:{contentStyle:{type:String,required:!0}},setup(e){const t=Object(a["o"])("sendCommand"),c=Object(a["o"])("ignoreResponse"),l=Object(s["b"])(),o=Object(a["f"])((()=>l.state.db.reports)),n=Object(a["f"])((()=>l.state.db.buffers)),b=Object(a["f"])((()=>l.state.db.devices)),d=Object(a["f"])((()=>l.state.db.command)),O=Object(a["f"])((()=>l.getters["db/devDevice"])),j=Object(a["f"])((()=>l.getters["db/devReports"])),u=e=>l.commit(i["g"],e),p=e=>l.dispatch(ue["a"],e),v=Object(a["f"])((()=>l.state.common.notification)),f=e=>l.commit(r["c"],e),m=Object(a["D"])(null),k=Object(a["f"])({get:()=>v.value,set:e=>f(e)}),g=()=>Object(K["a"])("Are you sure to remove all data?").onOk((()=>u())),S=()=>{if(!O.value)return;const e=j.value.find((({frameID:e})=>"FULL"==Object(R["e"])(e.val)));if(!e)return;const c=Object(R["b"])(e);c&&t(`REPORT_RTC=${c}`)},h=([e])=>{je(e).then((e=>p(e)))};return Object(a["Q"])((()=>n.value.length),(e=>0==e&&m.value.reset()),{deep:!0}),{uploader:m,devices:b,command:d,reports:o,devReports:j,notificationState:k,calibrate:S,clearStore:g,ignoreResponse:c,importData:h,exportJSON:Oe,exportCSV:se}}}),ve=c("f20b"),fe=c("1c1c"),me=c("ee89"),ke=c("9564"),ge=c("7f67");pe.render=oe;var Se=pe;y()(pe,"components",{QBtn:g["a"],QBtnDropdown:ve["a"],QList:fe["a"],QItem:p["a"],QItemSection:v["a"],QItemLabel:m["a"],QUploader:me["a"],QToggle:ke["a"]}),y()(pe,"directives",{ClosePopup:ge["a"]});var he=Object(a["l"])({components:{MapManagement:V,ReportLog:q,DriverManagement:$,GlobalConfiguration:Se},setup(e){const t=Object(s["b"])(),c=Object(a["f"])((()=>t.getters["db/devReports"])),l=Object(a["f"])((()=>t.getters["db/devFingers"])),o=Object(a["D"])("tab-1"),n=Object(a["D"])(50),b=Object(a["f"])((()=>`height: calc(100vh - ${n.value}vh - 95px)`));return{selectedTab:o,splitter:n,devReports:c,devFingers:l,contentStyle:b}}}),ye=c("9989"),qe=c("8562"),_e=c("cb32"),Ge=c("429bb"),Qe=c("7460"),xe=c("58a81"),De=c("adad"),Ce=c("823b");he.render=l;t["default"]=he;y()(he,"components",{QPage:ye["a"],QSplitter:qe["a"],QAvatar:_e["a"],QTabs:Ge["a"],QTab:Qe["a"],QBadge:xe["a"],QTabPanels:De["a"],QTabPanel:Ce["a"]})}}]);