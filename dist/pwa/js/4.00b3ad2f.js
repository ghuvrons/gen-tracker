(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(e,t,a){"use strict";a.r(t);var l=a("7a23");function c(e,t,a,c,o,n){const b=Object(l["G"])("map-management"),i=Object(l["G"])("q-avatar"),r=Object(l["G"])("q-badge"),s=Object(l["G"])("q-tab"),d=Object(l["G"])("q-tabs"),j=Object(l["G"])("report-log"),O=Object(l["G"])("q-tab-panel"),u=Object(l["G"])("driver-management"),p=Object(l["G"])("global-configuration"),v=Object(l["G"])("q-tab-panels"),m=Object(l["G"])("q-splitter"),f=Object(l["G"])("q-page");return Object(l["A"])(),Object(l["h"])(f,null,{default:Object(l["S"])((()=>[Object(l["k"])(m,{modelValue:e.splitter,"onUpdate:modelValue":t[3]||(t[3]=t=>e.splitter=t),style:{height:"calc(100vh - 50px)"},horizontal:""},{before:Object(l["S"])((()=>[Object(l["k"])(b)])),separator:Object(l["S"])((()=>[Object(l["k"])(i,{color:"grey","text-color":"white",size:"20px",icon:"drag_indicator"})])),after:Object(l["S"])((()=>[Object(l["k"])(d,{modelValue:e.selectedTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedTab=t),class:"bg-primary text-white",dense:""},{default:Object(l["S"])((()=>[Object(l["k"])(s,{name:"tab-1",label:"Report Log"},{default:Object(l["S"])((()=>[Object(l["k"])(r,{color:"red",floating:""},{default:Object(l["S"])((()=>[Object(l["j"])(Object(l["K"])(e.devReports.length),1)])),_:1})])),_:1}),Object(l["k"])(s,{name:"tab-2",label:"Driver Management"},{default:Object(l["S"])((()=>[Object(l["k"])(r,{color:"red",floating:""},{default:Object(l["S"])((()=>[Object(l["j"])(Object(l["K"])(e.devFingers.length),1)])),_:1})])),_:1}),Object(l["k"])(s,{name:"tab-3",label:"Configuration"})])),_:1},8,["modelValue"]),Object(l["k"])(v,{modelValue:e.selectedTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedTab=t),swipeable:""},{default:Object(l["S"])((()=>[Object(l["k"])(O,{name:"tab-1"},{default:Object(l["S"])((()=>[Object(l["k"])(j,{"content-style":e.contentStyle},null,8,["content-style"])])),_:1}),Object(l["k"])(O,{name:"tab-2"},{default:Object(l["S"])((()=>[Object(l["k"])(u,{"content-style":e.contentStyle},null,8,["content-style"])])),_:1}),Object(l["k"])(O,{name:"tab-3"},{default:Object(l["S"])((()=>[Object(l["k"])(p,{"content-style":e.contentStyle},null,8,["content-style"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})}const o=Object(l["j"])(" No report yet ");function n(e,t,a,c,n,b){const i=Object(l["G"])("q-icon"),r=Object(l["G"])("q-banner"),s=Object(l["G"])("q-chip"),d=Object(l["G"])("q-item-section"),j=Object(l["G"])("q-item-label"),O=Object(l["G"])("q-item"),u=Object(l["G"])("q-virtual-scroll"),p=Object(l["G"])("q-tooltip"),v=Object(l["G"])("q-btn"),m=Object(l["G"])("q-page-sticky");return Object(l["A"])(),Object(l["h"])("div",{style:e.contentStyle},[0==e.devReports.length?(Object(l["A"])(),Object(l["h"])(r,{key:0},{avatar:Object(l["S"])((()=>[Object(l["k"])(i,{name:"info"})])),default:Object(l["S"])((()=>[o])),_:1})):(Object(l["A"])(),Object(l["h"])(u,{key:1,onKeyup:t[1]||(t[1]=t=>e.changeReport(t)),items:e.devReports,separator:""},{default:Object(l["S"])((({item:t,index:a})=>[Object(l["k"])(O,{key:`${t.sendDatetime.val}.${a}`,onClick:a=>e.setReport(t),active:t.hex===e.report.hex,"active-class":"bg-primary text-white",clickable:"",dense:""},{default:Object(l["S"])((()=>[Object(l["k"])(d,{avatar:""},{default:Object(l["S"])((()=>[Object(l["k"])("div",null,[Object(l["k"])(s,{color:e.fullFrame(t)?"green":"light-green",class:"q-ml-sm text-center",dark:"",dense:"",square:""},{default:Object(l["S"])((()=>[Object(l["j"])(Object(l["K"])(e.fullFrame(t)?"F":"S"),1)])),_:2},1032,["color"]),Object(l["k"])(s,{color:"primary",dark:"",dense:"",square:""},{default:Object(l["S"])((()=>[Object(l["j"])(Object(l["K"])(e.getDatetime(t.sendDatetime))+" - "+Object(l["K"])(e.getDatetime(t.logDatetime))+" ("+Object(l["K"])(e.getDilation(t))+"s) ",1)])),_:2},1024)])])),_:2},1024),Object(l["k"])(d,null,{default:Object(l["S"])((()=>[Object(l["k"])(j,{class:"ellipsis"},{default:Object(l["S"])((()=>[Object(l["j"])(Object(l["K"])(t.hex),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","active"])])),_:1},8,["items"])),Object(l["k"])(m,{position:"bottom-right",offset:[18,18]},{default:Object(l["S"])((()=>[Object(l["k"])(v,{onClick:t[2]||(t[2]=t=>e.followState=!e.followState),icon:e.followState?"lock":"lock_open",color:e.followState?"secondary":"grey",disable:0==e.devReports.length,"fab-mini":""},{default:Object(l["S"])((()=>[e.$q.platform.is.desktop?(Object(l["A"])(),Object(l["h"])(p,{key:0,anchor:"top middle",self:"bottom middle"},{default:Object(l["S"])((()=>[Object(l["j"])(Object(l["K"])(e.followState?"Unfollow":"Follow"),1)])),_:1})):Object(l["i"])("",!0)])),_:1},8,["icon","color","disable"])])),_:1})],4)}a("26e9");var b=a("9482"),i=a("cfbf"),r=a("a7bc"),s=a("5662"),d=a("5502"),j=a("9944"),O=Object(l["l"])({props:{contentStyle:{type:String,required:!0}},setup(e){const t=Object(d["b"])(),a=Object(l["f"])((()=>t.state.db.report)),c=Object(l["f"])((()=>t.getters["db/devReports"])),o=e=>t.commit(r["k"],e),n=Object(l["f"])((()=>t.state.common.follow)),O=e=>t.commit(s["b"],e),u=Object(l["f"])({get:()=>n.value,set:e=>O(e)}),p=({frameID:e})=>{const t=b["a"].frames.findIndex((e=>"FULL"==e));return e.val===t},v=e=>i["a"].unix(e.val).format("HH:mm:ss"),m=({sendDatetime:e,logDatetime:t})=>Object(j["c"])(t.val,"seconds",e.val),f=({code:e})=>{var t,l;if(!["ArrowUp","ArrowDown"].includes(e))return;const n=null===(t=a.value)||void 0===t||null===(l=t.sendDatetime)||void 0===l?void 0:l.val;if(!n)return;let b;b="ArrowUp"==e?c.value.slice().reverse().find((({sendDatetime:e})=>e.val>n)):c.value.find((({sendDatetime:e})=>e.val<n)),b&&o(b)};return{report:a,devReports:c,followState:u,setReport:o,fullFrame:p,changeReport:f,getDatetime:v,getDilation:m}}}),u=a("54e1"),p=a("0016"),v=a("a12b"),m=a("66e5"),f=a("4074"),k=a("b047"),g=a("0170"),S=a("de5e"),h=a("9c40"),y=a("05c0"),q=a("eebe"),_=a.n(q);O.render=n;var G=O;_()(O,"components",{QBanner:u["a"],QIcon:p["a"],QVirtualScroll:v["a"],QItem:m["a"],QItemSection:f["a"],QChip:k["a"],QItemLabel:g["a"],QPageSticky:S["a"],QBtn:h["a"],QTooltip:y["a"]});var D=a("ded3"),Q=a.n(D);function w(e,t,a,c,o,n){const b=Object(l["G"])("Marker"),i=Object(l["G"])("Polyline"),r=Object(l["G"])("GoogleMap");return Object(l["A"])(),Object(l["h"])(r,{class:"fit","api-key":e.apiKey,center:e.center,zoom:e.zoom},{default:Object(l["S"])((()=>[e.position.valid?(Object(l["A"])(),Object(l["h"])(b,{key:0,options:{position:e.center,icon:e.icon}},null,8,["options"])):Object(l["i"])("",!0),Object(l["k"])(i,{options:Q()({path:e.path},e.polyOptions)},null,8,["options"])])),_:1},8,["api-key","center","zoom"])}var x=a("4082"),C=a.n(x),F=a("af6a");const A=({lng:e,lat:t})=>{const{lngMin:a,lngMax:l,latMin:c,latMax:o}=b["a"].map.borderIndonesia;return e>a&&e<l&&t>c&&t<o},I=e=>{var t;const a=Q()(Q()({},b["a"].map.centerIndonesia),{},{valid:!1});var l,c;"FULL"==Object(j["e"])(null===e||void 0===e||null===(t=e.frameID)||void 0===t?void 0:t.val)&&(a.lat=null===e||void 0===e||null===(l=e.gpsLatitude)||void 0===l?void 0:l.val,a.lng=null===e||void 0===e||null===(c=e.gpsLongitude)||void 0===c?void 0:c.val,a.valid=A(a));return a},R=e=>{var t,a;return"FULL"==Object(j["e"])(null===e||void 0===e||null===(t=e.frameID)||void 0===t?void 0:t.val)?null===e||void 0===e||null===(a=e.gpsHeading)||void 0===a?void 0:a.val:0};var T=a("7ec9"),L=Object(l["l"])({components:{GoogleMap:T["a"],Marker:T["b"],Polyline:T["c"]},setup(e){const t=Object(d["b"])(),a=Object(l["f"])((()=>t.state.db.report)),c=Object(l["f"])((()=>t.getters["db/devDevice"])),o=Object(l["f"])((()=>t.getters["db/devReports"])),{centerIndonesia:n,zoom:i}=b["a"].map,r=Object(l["C"])({zoom:i,icon:{path:"M16.001 5c-4.216 0-7.714 3.418-7.634 7.634.029 1.578.719 2.824 1.351 4.024.242.461 6.264 10.332 6.264 10.332V27l.001-.007.002.007v-.01l6.531-10.377c.407-.703.793-1.771.793-1.771A7.631 7.631 0 0 0 16.001 5zM16 16.019a3.895 3.895 0 0 1-3.896-3.897A3.898 3.898 0 1 1 16 16.019z",rotation:-180,fillColor:"red",fillOpacity:1,strokeWeight:.3,anchor:{x:16,y:28}},path:[],center:Q()({},n),position:Q()(Q()({},n),{},{valid:!1}),polyOptions:{geodesic:!0,strokeColor:"#F88",strokeOpacity:.75,strokeWeight:2}}),s=e=>{let{valid:t}=e,a=C()(e,["valid"]);r.zoom=t?17:i,r.center=Q()({},t?a:n),r.position=Q()(Q()({},a),{},{valid:t})},O=e=>{const t=I(e);t.valid&&r.path.push(t)};return Object(l["Q"])((()=>c.value),((e,t)=>{(null===e||void 0===e?void 0:e.vin)!=(null===t||void 0===t?void 0:t.vin)?(r.path=[],o.value.filter((({frameID:e})=>"FULL"==Object(j["e"])(e.val))).forEach((e=>O(e)))):O(null===e||void 0===e?void 0:e.lastFullReport)}),{immediate:!0,deep:!0}),Object(l["Q"])((()=>a.value),(e=>{var t;const a="FULL"==Object(j["e"])(null===e||void 0===e||null===(t=e.frameID)||void 0===t?void 0:t.val),l=a?e:Object(F["c"])(e,o.value);s(I(l)),r.icon.rotation=R(l)-180}),{immediate:!0}),Q()(Q()({},Object(l["N"])(r)),{},{apiKey:b["a"].map.apiKey})}});L.render=w;var V=L;const M={class:"text-subtitle2"},K=Object(l["j"])(" No finger driver yet ");function N(e,t,a,c,o,n){const b=Object(l["G"])("q-icon"),i=Object(l["G"])("q-banner"),r=Object(l["G"])("q-chip"),s=Object(l["G"])("q-item-section"),d=Object(l["G"])("q-item-label"),j=Object(l["G"])("q-btn"),O=Object(l["G"])("q-item"),u=Object(l["G"])("q-virtual-scroll"),p=Object(l["G"])("q-fab-action"),v=Object(l["G"])("q-fab"),m=Object(l["G"])("q-page-sticky");return Object(l["A"])(),Object(l["h"])("div",{style:e.contentStyle},[Object(l["k"])("div",M,"Last fetch: "+Object(l["K"])(e.getFingerTime()),1),0==e.devFingers.length?(Object(l["A"])(),Object(l["h"])(i,{key:0},{avatar:Object(l["S"])((()=>[Object(l["k"])(b,{name:"info"})])),default:Object(l["S"])((()=>[K])),_:1})):(Object(l["A"])(),Object(l["h"])(u,{key:1,items:e.devFingers,separator:""},{default:Object(l["S"])((({item:t,index:a})=>[Object(l["k"])(O,{key:a,dense:""},{default:Object(l["S"])((()=>[Object(l["k"])(s,{avatar:""},{default:Object(l["S"])((()=>[Object(l["k"])(r,{color:"primary",dark:"",square:""},{default:Object(l["S"])((()=>[Object(l["j"])(Object(l["K"])(t.fingerID),1)])),_:2},1024)])),_:2},1024),Object(l["k"])(s,null,{default:Object(l["S"])((()=>[Object(l["k"])(d,null,{default:Object(l["S"])((()=>[Object(l["j"])("Mr. "+Object(l["K"])(e.name[t.fingerID-1]),1)])),_:2},1024)])),_:2},1024),Object(l["k"])(s,{side:""},{default:Object(l["S"])((()=>[Object(l["k"])(j,{onClick:a=>e.remove(t),size:"sm",icon:"delete",outline:"",unelevated:"",round:""},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1},8,["items"])),Object(l["k"])(m,{position:"bottom-right",offset:[18,18]},{default:Object(l["S"])((()=>[Object(l["k"])(v,{modelValue:e.fab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.fab=t),"external-label":"","vertical-actions-align":"right",color:"secondary",icon:"keyboard_arrow_left",direction:"left","label-position":"top",padding:"sm"},{default:Object(l["S"])((()=>[Object(l["k"])(p,{onClick:e.fetch,disable:!e.devDevice,"label-position":"top",color:"primary",icon:"download",label:"Fetch","external-label":""},null,8,["onClick","disable"]),Object(l["k"])(p,{onClick:e.add,disable:!e.devDevice,"label-position":"top",color:"green",icon:"upload",label:"Add","external-label":""},null,8,["onClick","disable"]),Object(l["k"])(p,{onClick:e.clear,disable:!e.devDevice,"label-position":"top",color:"orange",icon:"delete_forever",label:"Reset","external-label":""},null,8,["onClick","disable"])])),_:1},8,["modelValue"])])),_:1})],4)}var U=a("b7fa"),$=Object(l["l"])({props:{contentStyle:{type:String,required:!0}},setup(e){const t=Object(l["o"])("sendCommand"),a=Object(d["b"])(),c=Object(l["f"])((()=>a.getters["db/devDevice"])),o=Object(l["f"])((()=>a.getters["db/devFingers"])),n=Object(l["D"])(["One","Two","Three","Four","Five"]),b=Object(l["D"])(!1),r=()=>{var e;const{fingerTime:t}=null!==(e=c.value)&&void 0!==e?e:{};return t?i["a"].unix(t).format("DD-MM-YY HH:mm:ss"):"Unknown"},s=()=>t("FINGER_FETCH"),j=()=>t("FINGER_ADD"),O=({fingerID:e})=>Object(U["a"])(`Are you sure to remove this fingerprint ${e} ?`).onOk((()=>t(`FINGER_DEL=${e}`))),u=()=>Object(U["a"])("Are you sure to clear all fingerprints  ?").onOk((()=>t("FINGER_RST")));return{name:n,fab:b,devFingers:o,devDevice:c,getFingerTime:r,fetch:s,add:j,remove:O,clear:u}}}),z=a("c294"),E=a("72db");$.render=N;var H=$;_()($,"components",{QBanner:u["a"],QIcon:p["a"],QVirtualScroll:v["a"],QItem:m["a"],QItemSection:f["a"],QChip:k["a"],QItemLabel:g["a"],QBtn:h["a"],QPageSticky:S["a"],QFab:z["a"],QFabAction:E["a"]});const P={class:"row q-gutter-xs"},B={class:"col-auto"},J={key:0,class:"col-auto"},Y={class:"col-auto"},W={class:"col-auto"},X=Object(l["j"])("CSV"),Z=Object(l["j"])("JSON"),ee={class:"row q-gutter-xs q-mt-xs"},te={class:"col-auto"},ae={class:"row q-gutter-xs q-mt-xs"},le={class:"col-auto"};function ce(e,t,a,c,o,n){const b=Object(l["G"])("q-btn"),i=Object(l["G"])("q-item-label"),r=Object(l["G"])("q-item-section"),s=Object(l["G"])("q-item"),d=Object(l["G"])("q-list"),j=Object(l["G"])("q-btn-dropdown"),O=Object(l["G"])("q-uploader"),u=Object(l["G"])("q-toggle"),p=Object(l["H"])("close-popup");return Object(l["A"])(),Object(l["h"])("div",{style:e.contentStyle},[Object(l["k"])("div",P,[Object(l["k"])("div",B,[Object(l["k"])(b,{icon:"delete",label:"Reset DB",disable:0==e.devices.length,onClick:t[1]||(t[1]=t=>e.clearStore())},null,8,["disable"])]),e.$q.fullscreen.isCapable?(Object(l["A"])(),Object(l["h"])("div",J,[Object(l["k"])(b,{onClick:t[2]||(t[2]=t=>e.$q.fullscreen.toggle()),label:e.$q.fullscreen.isActive?"Normal":"Full",icon:e.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen"},null,8,["label","icon"])])):Object(l["i"])("",!0),Object(l["k"])("div",Y,[Object(l["k"])(b,{icon:"alarm_on",label:"Calibrate",disable:0==e.devReports.length,onClick:t[3]||(t[3]=t=>e.calibrate())},null,8,["disable"])]),Object(l["k"])("div",W,[Object(l["k"])(j,{icon:"cloud_download",label:"Export"},{default:Object(l["S"])((()=>[Object(l["k"])(d,null,{default:Object(l["S"])((()=>[Object(l["T"])(Object(l["k"])(s,{clickable:e.reports.length>0,onClick:t[4]||(t[4]=t=>e.exportCSV(e.reports))},{default:Object(l["S"])((()=>[Object(l["k"])(r,null,{default:Object(l["S"])((()=>[Object(l["k"])(i,null,{default:Object(l["S"])((()=>[X])),_:1})])),_:1})])),_:1},8,["clickable"]),[[p]]),Object(l["T"])(Object(l["k"])(s,{clickable:e.reports.length>0,onClick:t[5]||(t[5]=t=>e.exportJSON(e.reports))},{default:Object(l["S"])((()=>[Object(l["k"])(r,null,{default:Object(l["S"])((()=>[Object(l["k"])(i,null,{default:Object(l["S"])((()=>[Z])),_:1})])),_:1})])),_:1},8,["clickable"]),[[p]])])),_:1})])),_:1})])]),Object(l["k"])("div",ee,[Object(l["k"])("div",te,[Object(l["k"])(O,{ref:"uploader",factory:e.importData,accept:".json",label:"Import JSON","auto-upload":""},null,8,["factory"])])]),Object(l["k"])("div",ae,[Object(l["k"])("div",le,[Object(l["k"])(u,{modelValue:e.notificationState,"onUpdate:modelValue":t[6]||(t[6]=t=>e.notificationState=t),label:"Push Notification"},null,8,["modelValue"])])])],4)}a("ddb0"),a("13d5"),a("e6cf");var oe=a("f23f"),ne=a("2e92");const be=e=>e.map((e=>Q()({},F["a"].reduce(((t,{field:a,no:l})=>Q()(Q()({},t),{},{[l]:e[a]?e[a].out:""})),{})))),ie=()=>F["a"].reduce(((e,{title:t,unit:a})=>e.concat([t+(a?` (${a})`:"")])),[]),re=e=>{const t=new oe["ExportToCsv"]({fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,title:"My Awesome CSV",useTextFile:!1,useBom:!0,useKeysAsHeaders:!1,headers:ie()});t.generateCsv(be(e))},se=e=>e?e.map((({hex:e})=>e)):[],de=e=>{const t=`tracking-${Object(i["a"])().format("YYMMDDHHmmss")}`,a=se(e.slice().reverse()),l="json";Object(ne["a"])({data:a,fileName:t,exportType:l})},je=e=>new Promise(((t,a)=>{e||a();const l=new FileReader;l.onload=e=>t(JSON.parse(e.target.result)),l.readAsText(e)}));var Oe=a("6ad4"),ue=Object(l["l"])({props:{contentStyle:{type:String,required:!0}},setup(e){const t=Object(l["o"])("sendCommand"),a=Object(d["b"])(),c=Object(l["f"])((()=>a.state.db.reports)),o=Object(l["f"])((()=>a.state.db.buffers)),n=Object(l["f"])((()=>a.state.db.devices)),b=Object(l["f"])((()=>a.state.db.command)),i=Object(l["f"])((()=>a.getters["db/devDevice"])),O=Object(l["f"])((()=>a.getters["db/devReports"])),u=e=>a.commit(r["g"],e),p=e=>a.dispatch(Oe["a"],e),v=Object(l["f"])((()=>a.state.common.notification)),m=e=>a.commit(s["c"],e),f=Object(l["D"])(null),k=Object(l["f"])({get:()=>v.value,set:e=>m(e)}),g=()=>Object(U["a"])("Are you sure to remove all data?").onOk((()=>u())),S=()=>{if(!i.value)return;const e=O.value.find((({frameID:e})=>"FULL"==Object(j["e"])(e.val)));if(!e)return;const a=Object(j["b"])(e);a&&t(`GEN_RTC=${a}`)},h=([e])=>{je(e).then((e=>p(e)))};return Object(l["Q"])((()=>o.value.length),(e=>0==e&&f.value.reset()),{deep:!0}),{uploader:f,devices:n,command:b,reports:c,devReports:O,notificationState:k,calibrate:S,clearStore:g,importData:h,exportJSON:de,exportCSV:re}}}),pe=a("f20b"),ve=a("1c1c"),me=a("ee89"),fe=a("9564"),ke=a("7f67");ue.render=ce;var ge=ue;_()(ue,"components",{QBtn:h["a"],QBtnDropdown:pe["a"],QList:ve["a"],QItem:m["a"],QItemSection:f["a"],QItemLabel:g["a"],QUploader:me["a"],QToggle:fe["a"]}),_()(ue,"directives",{ClosePopup:ke["a"]});var Se=Object(l["l"])({components:{MapManagement:V,ReportLog:G,DriverManagement:H,GlobalConfiguration:ge},setup(e){const t=Object(d["b"])(),a=Object(l["f"])((()=>t.getters["db/devReports"])),c=Object(l["f"])((()=>t.getters["db/devFingers"])),o=Object(l["D"])("tab-1"),n=Object(l["D"])(50),b=Object(l["f"])((()=>`height: calc(100vh - ${n.value}vh - 95px)`));return{selectedTab:o,splitter:n,devReports:a,devFingers:c,contentStyle:b}}}),he=a("9989"),ye=a("8562"),qe=a("cb32"),_e=a("429bb"),Ge=a("7460"),De=a("58a81"),Qe=a("adad"),we=a("823b");Se.render=c;t["default"]=Se;_()(Se,"components",{QPage:he["a"],QSplitter:ye["a"],QAvatar:qe["a"],QTabs:_e["a"],QTab:Ge["a"],QBadge:De["a"],QTabPanels:Qe["a"],QTabPanel:we["a"]})}}]);